var KeyTable;!function(e,t,n){var o=function(o){return KeyTable=function(l){function a(e){return function(t,n,o){null!==t&&"number"!=typeof t||null!==n&&"number"!=typeof n||"function"!=typeof o?"object"==typeof t&&"function"==typeof n?(t=y(t),k[e].push({x:t[0],y:t[1],fn:n})):alert("Unhandable event type was added: x"+t+"  y:"+n+"  z:"+o):k[e].push({x:t,y:n,fn:o})}}function f(e){return function(t,n,o){null!==t&&"number"!=typeof t||null!==n&&"number"!=typeof n?"object"==typeof t?(t=y(t),"function"==typeof n?r(e,t[0],t[1],n):r(e,t[0],t[1])):alert("Unhandable event type was removed: x"+t+"  y:"+n+"  z:"+o):"function"==typeof o?r(e,t,n,o):r(e,t,n)}}function r(e,t,n,o){for(var l=0,a=0,f=k[e].length;f-l>a;a++)if("undefined"!=typeof o)k[e][a-l].x==t&&k[e][a-l].y==n&&k[e][a-l].fn==o&&(k[e].splice(a-l,1),l++);else if(k[e][a-l].x==t&&k[e][a-l].y==n)return k[e].splice(a,1),1;return l}function i(e,t,n){for(var o=0,e=k[e],l=0;l<e.length;l++)(e[l].x==t&&e[l].y==n||null===e[l].x&&e[l].y==n||e[l].x==t&&null===e[l].y||null===e[l].x&&null===e[l].y)&&(e[l].fn(p(t,n),t,n),o++);return o}function s(n,l){if(v!=n){"undefined"==typeof l&&(l=!0),null!==v&&c(v),o(n).addClass(L),o(n).parent().addClass(L);var a;if(_){a=_;for(var f=b(n)[1],r=x;f>=a.fnDisplayEnd();)0<=a._iDisplayLength?a._iDisplayStart+a._iDisplayLength<a.fnRecordsDisplay()&&(a._iDisplayStart+=a._iDisplayLength):a._iDisplayStart=0,_.oApi._fnCalculateEnd(a);for(;f<a._iDisplayStart;)a._iDisplayStart=0<=a._iDisplayLength?a._iDisplayStart-a._iDisplayLength:0,0>a._iDisplayStart&&(a._iDisplayStart=0),_.oApi._fnCalculateEnd(a);_.oApi._fnDraw(a),x=r}f=y(n),v=n,D=f[0],N=f[1];var s,u,d,p,T;if(l){s=o(e).height(),f=o(e).width(),u=o(t).scrollTop(),r=o(t).scrollLeft(),d=n.offsetHeight,p=n.offsetWidth,T=n;var m=0,h=0;if(T.offsetParent)for(m=T.offsetLeft,h=T.offsetTop,T=T.offsetParent;T;)m+=T.offsetLeft,h+=T.offsetTop,T=T.offsetParent;T=[m,h],!_||"undefined"==typeof a.oScroll||""===a.oScroll.sX&&""===a.oScroll.sY||(T[1]-=o(a.nTable.parentNode).scrollTop(),T[0]-=o(a.nTable.parentNode).scrollLeft()),T[1]+d>u+s?(s=T[1]+d-s,t.documentElement.scrollTop=s,t.body.scrollTop=s):T[1]<u&&(s=T[1],t.documentElement.scrollTop=s,t.body.scrollTop=s),T[0]+p>r+f?(f=T[0]+p-f,t.documentElement.scrollLeft=f,t.body.scrollLeft=f):T[0]<r&&(f=T[0],t.documentElement.scrollLeft=f,t.body.scrollLeft=f)}!_||"undefined"==typeof a.oScroll||""===a.oScroll.sX&&""===a.oScroll.sY||(a=a.nTable.parentNode,s=a.clientHeight,f=a.clientWidth,u=a.scrollTop,r=a.scrollLeft,d=n.offsetHeight,p=n.offsetWidth,n.offsetTop+d>s+u?a.scrollTop=n.offsetTop+d-s:n.offsetTop<u&&(a.scrollTop=n.offsetTop),n.offsetLeft+p>f+r?a.scrollLeft=n.offsetLeft+p-f:n.offsetLeft<r&&(a.scrollLeft=n.offsetLeft)),x||(x=!0),i("focus",D,N)}}function u(){c(v),v=N=D=null,x=!1}function c(e){o(e).removeClass(L),o(e).parent().removeClass(L),i("blur",D,N)}function d(){for(var e=this;"TD"!=e.nodeName;)e=e.parentNode;s(e),x||(x=!0)}function p(e,t){return _?"undefined"!=typeof _.aoData[_.aiDisplay[t]]?_.aoData[_.aiDisplay[t]].nTr.getElementsByTagName("td")[e]:null:o("tr:eq("+t+")>td:eq("+e+")",g)[0]}function y(e){return _?[o("td",e.parentNode).index(e),o("tr",e.parentNode.parentNode).index(e.parentNode)+_._iDisplayStart]:[o("td",e.parentNode).index(e),o("tr",e.parentNode.parentNode).index(e.parentNode)]}function b(e){for(var t=0,n=_.aiDisplay.length;n>t;t++)for(var o=_.aoData[_.aiDisplay[t]].nTr.getElementsByTagName("td"),l=0,a=o.length;a>l;l++)if(o[l]==e)return[l,t];return null}this.block=!1,this.event={remove:{}},this.fnGetCurrentPosition=function(){return[D,N]},this.fnGetCurrentData=function(){return v.innerHTML},this.fnGetCurrentTD=function(){return v},this.fnSetPosition=function(e,t){s("object"==typeof e&&e.nodeName?e:p(e,t))},this.fnBlur=function(){u()};var T,m,h,g=null,v=null,D=null,N=null,S=null,L="focus",x=!1,k={action:[],esc:[],focus:[],blur:[]},_=null,C=!1;for(h in k)h&&(this.event[h]=a(h),this.event.remove[h]=f(h));var E;l===n?(h=o("table.KeyTable")[0],E=null):o.isPlainObject(l)?(h=l.table,E=l.datatable):(E=new o.fn.dataTable.Api(l).settings()[0],h=E.nTable);var K=l,S=this;"undefined"==typeof K&&(K={}),"undefined"==typeof K.focus&&(K.focus=[0,0]),K.table=h,o(K.table).addClass("KeyTable"),"undefined"!=typeof K.focusClass&&(L=K.focusClass),"undefined"!=typeof E&&(_=E),"undefined"==typeof K.initScroll&&(K.initScroll=!0),"undefined"==typeof K.form&&(K.form=!1),T=K.form,g=K.table.getElementsByTagName("tbody")[0],T?(l=t.createElement("div"),m=t.createElement("input"),l.style.height="1px",l.style.width="0px",l.style.overflow="hidden","undefined"!=typeof K.tabIndex&&(m.tabIndex=K.tabIndex),l.appendChild(m),K.table.parentNode.insertBefore(l,K.table.nextSibling),o(m).focus(function(){C||(x=!0,C=!1,"undefined"!=typeof K.focus.nodeName?s(K.focus,K.initScroll):s(p(K.focus[0],K.focus[1]),K.initScroll),setTimeout(function(){m.blur()},0))}),x=!1):("undefined"!=typeof K.focus.nodeName?s(K.focus,K.initScroll):s(p(K.focus[0],K.focus[1]),K.initScroll),x||(x=!0)),o(t).bind("keydown",function(e){if(S.block||!x||e.metaKey||e.altKey||e.ctrlKey)return!0;var t;t=g.getElementsByTagName("tr")[0].getElementsByTagName("td").length;var n;if(_){n=_.aiDisplay.length;var o=b(v);if(null===o)return;D=o[0],N=o[1]}else n=g.getElementsByTagName("tr").length;switch(o=9==e.keyCode&&e.shiftKey?-1:e.keyCode){case 13:return e.preventDefault(),e.stopPropagation(),i("action",D,N),!0;case 27:if(!i("esc",D,N))return void u();e=D,t=N;break;case-1:case 37:if(D>0)e=D-1,t=N;else{if(!(N>0))return-1==o&&T?(C=!0,m.focus(),setTimeout(function(){C=!1},0),x=!1,u(),!0):!1;e=t-1,t=N-1}break;case 38:if(!(N>0))return!1;e=D,t=N-1;break;case 36:e=D,t=0;break;case 33:e=D,t=N-10,0>t&&(t=0);break;case 9:case 39:if(t-1>D)e=D+1,t=N;else{if(!(n-1>N))return 9==o&&T?(C=!0,m.focus(),setTimeout(function(){C=!1},0),x=!1,u(),!0):!1;e=0,t=N+1}break;case 40:if(!(n-1>N))return!1;e=D,t=N+1;break;case 35:e=D,t=n-1;break;case 34:e=D,t=N+10,t>n-1&&(t=n-1);break;default:return!0}return s(p(e,t)),!1}),_?o(_.nTable).on("click","td",d):o(g).on("click","td",d),o(t).click(function(e){for(var e=e.target,t=!1;e;){if(e==K.table){t=!0;break}e=e.parentNode}t||u()})},KeyTable.version="1.2.0",o.fn.dataTable.KeyTable=KeyTable,o.fn.DataTable.KeyTable=KeyTable};"function"==typeof define&&define.amd?define("datatables-keytable",["jquery","datatables"],o):jQuery&&!jQuery.fn.dataTable.KeyTable&&o(jQuery,jQuery.fn.dataTable)}(window,document);