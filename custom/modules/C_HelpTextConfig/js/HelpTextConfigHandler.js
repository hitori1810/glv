SUGAR.HelpTextConfig={};SUGAR.HelpTextConfig.config={};$(function(){var quickCreateLinks=$('#quickCreateULSubnav').find('li').find('a');var quickCreateButtons=$('.cardDetails').find('.cardActions').find('button');quickCreateLinks.add(quickCreateButtons).click(function(){if($(this).prop('tagName')=='A'&&$(this).attr('href').indexOf('Emails')>=0){return;}
SUGAR.util.doWhen(function(){return $('form[id*="form_DCQuickCreate"]')[0]!=null;},function(){var form=$('form[id*="form_DCQuickCreate"]');ajaxLoadHelpTextConfig(form);});});if($('form#EditView')[0]!=null){var form=$('form#EditView');ajaxLoadHelpTextConfig(form);}
if($('#formDetailView')[0]!=null){$('input[id*="create"][id*="create"]').click(function(){SUGAR.util.doWhen(function(){return $('form[id*="form_SubpanelQuickCreate"]')[0]!=null;},function(){var form=$('form[id*="form_SubpanelQuickCreate"]');ajaxLoadHelpTextConfig(form);});});}
$('.helpTextButton').live('click',function(){var fieldName=$(this).attr('fieldName');var formId=$(this).closest('form').attr('id');var config=SUGAR.HelpTextConfig.config[formId];if(config!=null){var title=SUGAR.language.get('app_strings','LBL_HELP_TEXT_DIALOG_TITLE');var helpText=config[fieldName].help_text;var popup='<div>'+helpText+'</div>';$(popup).dialog({'title':title.format({'field_label':config[fieldName].label})});}});});function ajaxLoadHelpTextConfig(form){var formId=form.attr('id');if(form.find('input[name="module"]')[0]!=null){var moduleName=form.find('input[name="module"]').val();if(moduleName!=''){$.ajax({'url':'index.php?module=C_HelpTextConfig&action=ajaxloadconfig&sugar_body_only=true','type':'POST','dataType':'json','data':{'moduleName':moduleName},'success':function(config){if(!$.isEmptyObject(config)){SUGAR.HelpTextConfig.config[formId]=config;for(fieldName in config){var data=config[fieldName];targetField=form.find(':input[name="'+fieldName+'"]');if(targetField[0]!=null){var title=SUGAR.language.get('app_strings','BTN_HELP_TEXT_TILE');var helpTextButton='<span title="'+title+'" class="helpTextButton" fieldname="'+fieldName+'"></span>';var container=targetField.closest('td');if(container.find('.duplicationStatus')[0]!=null){var duplicationStatus=container.find('.duplicationStatus');$(helpTextButton).insertBefore(duplicationStatus);}else{targetField.closest('td').append(helpTextButton);}}}}}});}}}