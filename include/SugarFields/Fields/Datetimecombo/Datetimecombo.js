function Datetimecombo(a,b,c,d,e,f,g){if(this.datetime=a,this.allowEmptyHM=g,"undefined"==typeof this.datetime||""==a||trim(a).length<10){this.datetime="";var h=new Date;h.getMonth(),h.getDate(),h.getYear(),h.getHours(),h.getMinutes()}this.fieldname=b,""!=a&&(parts=a.split(" "),this.hrs=parseInt(parts[1].substring(0,2),10),this.mins=parseInt(parts[1].substring(3,5),10)),this.timeformat=c,this.tabindex=null==d||isNaN(d)?1:d,this.timeseparator=this.timeformat.substring(2,3),this.has12Hours=/^11/.test(this.timeformat),this.hasMeridiem=/am|pm/i.test(this.timeformat),this.hasMeridiem&&(this.pm=/pm/.test(this.timeformat)),this.meridiem=this.hasMeridiem?trim(this.datetime.substring(16)):"",this.datetime=this.datetime.substr(0,10),this.showCheckbox=e,this.checked=parseInt(f),YAHOO.util.Selector.query("input#"+this.fieldname+"_date")[0].value=this.datetime,this.mins>0&&this.mins<5?this.mins=5:this.mins>5&&this.mins<10?this.mins=10:this.mins>10&&this.mins<15?this.mins=15:this.mins>15&&this.mins<20?this.mins=20:this.mins>20&&this.mins<25?this.mins=25:this.mins>25&&this.mins<30?this.mins=30:this.mins>30&&this.mins<35?this.mins=35:this.mins>35&&this.mins<40?this.mins=40:this.mins>40&&this.mins<45?this.mins=45:this.mins>45&&this.mins<50?this.mins=50:this.mins>50&&this.mins<55?this.mins=55:this.mins>55&&(this.hrs+=1,this.mins=0,this.hasMeridiem&&12==this.hrs&&("pm"==this.meridiem||"am"==this.meridiem?"pm"==this.meridiem?this.meridiem="am":this.meridiem="pm":"PM"==this.meridiem?this.meridiem="AM":this.meridiem="PM"),this.hasMeridiem&&this.hrs>12&&(this.hrs=this.hrs-12))}Datetimecombo.prototype.jsscript=function(a){return text="\nfunction update_"+this.fieldname+"(calendar) {",text+='\nd = YAHOO.util.Selector.query("input#'+this.fieldname+'_date")[0].value;',text+='\nh = YAHOO.util.Selector.query("select#'+this.fieldname+'_hours")[0].value;',text+='\nm = YAHOO.util.Selector.query("select#'+this.fieldname+'_minutes")[0].value;',text+='\nnewdate = d + " " + h + "'+this.timeseparator+'" + m;',this.hasMeridiem&&(text+='\nif(typeof YAHOO.util.Selector.query("select#'+this.fieldname+'_meridiem")[0] != "undefined") {',text+='\n   newdate += YAHOO.util.Selector.query("select#'+this.fieldname+'_meridiem")[0].value;',text+="\n}"),text+='\nif(trim(newdate) =="'+this.timeseparator+'") newdate="";',text+='\nYAHOO.util.Selector.query("select#'+this.fieldname+'")[0].value = newdate;',text+="\n"+a,text+="\n}",text},Datetimecombo.prototype.html=function(a){var b='<span style="position:relative; top:6px;"><select class="datetimecombo_time" size="1" id="'+this.fieldname+'_hours" tabindex="'+this.tabindex+'" onchange="combo_'+this.fieldname+".update(); "+a+'">',c=this.has12Hours?1:0,d=this.has12Hours?12:23;for(this.allowEmptyHM&&(b+="<option></option>"),i=c;i<=d;i++)val=i<10?"0"+i:i,b+='<option value="'+val+'" '+(i==this.hrs?"SELECTED":"")+">"+val+"</option>";return b+="\n</select>&nbsp;",b+=this.timeseparator,b+='\n&nbsp;<select class="datetimecombo_time" size="1" id="'+this.fieldname+'_minutes" tabindex="'+this.tabindex+'" onchange="combo_'+this.fieldname+".update(); "+a+'">',this.allowEmptyHM&&(b+="\n<option></option>"),b+='\n<option value="00" '+(0==this.mins?"SELECTED":"")+">00</option>",b+='\n<option value="05" '+(5==this.mins?"SELECTED":"")+">05</option>",b+='\n<option value="10" '+(10==this.mins?"SELECTED":"")+">10</option>",b+='\n<option value="15" '+(15==this.mins?"SELECTED":"")+">15</option>",b+='\n<option value="20" '+(20==this.mins?"SELECTED":"")+">20</option>",b+='\n<option value="25" '+(25==this.mins?"SELECTED":"")+">25</option>",b+='\n<option value="30" '+(30==this.mins?"SELECTED":"")+">30</option>",b+='\n<option value="35" '+(35==this.mins?"SELECTED":"")+">35</option>",b+='\n<option value="40" '+(40==this.mins?"SELECTED":"")+">40</option>",b+='\n<option value="45" '+(45==this.mins?"SELECTED":"")+">45</option>",b+='\n<option value="50" '+(50==this.mins?"SELECTED":"")+">50</option>",b+='\n<option value="55" '+(55==this.mins?"SELECTED":"")+">55</option>",b+="\n</select>",this.hasMeridiem&&(b+="\n&nbsp;",b+='\n<select class="datetimecombo_time" size="1" id="'+this.fieldname+'_meridiem" tabindex="'+this.tabindex+'" onchange="combo_'+this.fieldname+".update(); "+a+'">',this.allowEmptyHM&&(b+="\n<option></option>"),b+='\n<option value="'+(this.pm?"am":"AM")+'" '+(/am/i.test(this.meridiem)?"SELECTED":"")+">"+(this.pm?"am":"AM")+"</option>",b+='\n<option value="'+(this.pm?"pm":"PM")+'" '+(/pm/i.test(this.meridiem)?"SELECTED":"")+">"+(this.pm?"pm":"PM")+"</option>",b+="\n</select>"),this.showCheckbox&&(b+='\n<input style="visibility:hidden;" type="checkbox" name="'+this.fieldname+'_flag" id="'+this.fieldname+'_flag" tabindex="'+this.tabindex+'" onchange="combo_'+this.fieldname+".update(); "+a+'" '+(this.checked?"CHECKED":"")+">"),b+="</span>"},Datetimecombo.prototype.update=function(a){"undefined"==typeof a&&(a=!0);var b=YAHOO.util.Selector.query("input#"+this.fieldname+"_date")[0],c=YAHOO.util.Selector.query("select#"+this.fieldname+"_hours")[0],d=YAHOO.util.Selector.query("select#"+this.fieldname+"_minutes")[0],e=YAHOO.util.Selector.query("select#"+this.fieldname+"_meridiem")[0];""==b.value?(c.selectedIndex=0,d.selectedIndex=0,e&&(e.selectedIndex=0)):this.allowEmptyHM&&(0==c.selectedIndex&&(c.selectedIndex=12),0==d.selectedIndex&&(d.selectedIndex=1),e&&0==e.selectedIndex&&(e.selectedIndex=1));var f=b.value+" "+c.value+this.timeseparator+d.value;this.hasMeridiem&&(ampm=YAHOO.util.Selector.query("select#"+this.fieldname+"_meridiem")[0].value,f+=ampm),trim(f)==""+this.timeseparator&&(f=""),YAHOO.util.Selector.query("input#"+this.fieldname)[0].value=f,a&&SUGAR.util.callOnChangeListers(this.fieldname),this.showCheckbox&&(flag=this.fieldname+"_flag",date=this.fieldname+"_date",hours=this.fieldname+"_hours",mins=this.fieldname+"_minutes",YAHOO.util.Selector.query("input#"+flag)[0].checked?(YAHOO.util.Selector.query("input#"+flag)[0].value=1,YAHOO.util.Selector.query("input#"+this.fieldname)[0].value="",YAHOO.util.Selector.query("input#"+date)[0].disabled=!0,YAHOO.util.Selector.query("select#"+hours)[0].disabled=!0,YAHOO.util.Selector.query("select#"+mins)[0].disabled=!0):(YAHOO.util.Selector.query("input#"+flag)[0].value=0,YAHOO.util.Selector.query("input#"+date)[0].disabled=!1,YAHOO.util.Selector.query("select#"+hours)[0].disabled=!1,YAHOO.util.Selector.query("select#"+mins)[0].disabled=!1))};