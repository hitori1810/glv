var DCMenu=YUI({debug:!1,combine:!0,timeout:1e4,base:"include/javascript/yui3/build/",comboBase:"index.php?entryPoint=getYUIComboFile&"});DCMenu.use("event","dd-plugin","dd-constrain","anim","cookie","json","node-menunav","io-base","io-form","io-upload-iframe","overlay",function(Y){function getOverlay(a,b){return a||(a=0),"undefined"==typeof overlays[a]&&(overlays[a]=new Y.Overlay({bodyContent:"",zIndex:21+a,shim:!1,visibility:!1}),overlays[a].after("render",function(a){this.get("boundingBox").plug(Y.Plugin.Drag,{handles:[".hd"]}),this.get("boundingBox").dd.plug(Y.Plugin.DDConstrained,{constrain:"view"})}),overlays[a].show=function(){this.visible=!0,this.get("boundingBox").setStyle("position","absolute"),this.get("boundingBox").setStyle("visibility","visible"),Y.one("#dcboxbody")&&(Y.one("#dcboxbody").setStyle("display",""),Y.one("#dcboxbody").setStyle("visibility","hidden"))},overlays[a].hide=function(){this.visible=!1,this.get("boundingBox").setStyle("visibility","hidden"),this.get("modal")&&this.toggleModal()},overlays[a].toggleModal=function(){var a=Y.one("#dcmask");this.get("modal")?(a&&a.setStyle("display","none"),this.set("modal",!1)):(a?a.setStyle("display","block"):(a=document.createElement("div"),a.className="mask",a.id="dcmask",a.style.width=a.style.height="100%",a.style.position="fixed",a.style.display="block",a.style.zIndex=19,document.body.appendChild(a)),this.set("modal",!0))}),overlays[a].render(),YAHOO.util.Event.onContentReady("dcboxbody",function(){}),b&&overlays[a].toggleModal(),overlays[a]}function setBody(a,b,c,d,e,f){var g={};if("object"==typeof f&&null!=f&&(g=f,f=!!g.extraButton&&g.extraButton),"undefined"==typeof a.html&&(a={html:a}),SUGAR.util.isLoginPage(a.html))return!1;DCMenu.closeOverlay(b);var h=getOverlay(b,g.modal);ua=navigator.userAgent.toLowerCase(),isIE7=ua.indexOf("msie 7")!=-1,"undefined"!=typeof e&&""!=e||"undefined"==typeof a.title||(e=a.title);var i="position:fixed";c&&(h.set("align",{node:"#"+c,points:[Y.WidgetPositionAlign.TL,Y.WidgetPositionAlign.BL]}),h.set("y",42));var j="";return j+='<div style="'+i+'"><div id="dcboxbody"  class="'+c+'"><div class="dashletPanel dc"><div class="hd" id="dchead">',void 0!==e?j+='<div id="dctitle">'+e+"</div>":"undefined"!=typeof d&&(j+='<div id="dctitle">'+d+"</div>"),j+='<div class="close">',"string"==typeof f&&(j+=f),j+='<a id="dcmenu_close_link" href="#" onclick="lastLoadedMenu=undefined;DCMenu.closeOverlay(\'\',\''+c+'\'); return false;"><i class="icon-remove icon-sm"></i></a></div></div><div class="bd"><div class="dccontent">'+a.html+"</div></div></div>","undefined"!=typeof resetEvalBool&&1==resetEvalBool&&(resetEvalBool=!1,evalHappened=!1),j="<script> var evalHappened = true; var resetEvalBool=true; </script>"+j,h.set("bodyContent",j),"undefined"==typeof a.eval||!a.eval||"undefined"!=typeof evalHappened&&0!=evalHappened||SUGAR.util.evalScript(j),evalHappened=!1,h.show(),h}function quickRequest(a,b,c){"undefined"!=typeof c&&"function"==typeof c||(c=function(a,b){});Y.io(b,{method:"POST",on:{success:c,failure:function(a,b){}}})}var requests={},overlays=[],overlayDepth=0,menuFunctions={},lastIconChange=null,isRTL=!1;DCMenu.menu=function(a,b,c){"undefined"!=typeof lastLoadedMenu&&lastLoadedMenu==a||(lastLoadedMenu=a,"undefined"==typeof menuFunctions[a]&&loadView(a,"index.php?source_module="+this.module+"&record="+this.record+"&action=Quickcreate&module="+a,null,null,b,{modal:!!c}))},DCMenu.displayModuleMenu=function(a,b){loadView(b,"index.php?module="+b+"&action=ajaxmenu",0,"moduleTabLI_"+b)},DCMenu.closeTopOverlay=function(){overlays[overlays.length-1].hide()},DCMenu.closeOverlay=function(a,b){DCMenu.closeQView();for(var c=0;c<overlays.length;){if(!a||c>=a)if(c!=a||overlays[c].visible){if("undefined"!=typeof overlays[c].bodyNode&&"undefined"!=typeof overlays[c].bodyNode._node&&"undefined"!=typeof overlays[c].bodyNode._node.getElementsByTagName("form")[0]){var d=onUnloadEditView(overlays[c].bodyNode._node.getElementsByTagName("form")[0]);if(null!=d){if(!confirm(d)){c++;continue}disableOnUnloadEditView(overlays[c].bodyNode._node.getElementsByTagName("form")[0])}}overlays[c].hide(),overlays[c].set("bodyContent",""),b&&$("#"+b).removeClass("focused")}else overlays[c].show();c++}DCMenu.hideQEPanel()},DCMenu.minimizeOverlay=function(){Y.one("#dcboxbody").setStyle("display","none"),Y.one("#dcboxbody").setStyle("width","750px;")},DCMenu.showView=function(a,b){setBody(a,0,b)},DCMenu.iFrame=function(a,b,c){setBody("<iframe style='border:0px;height:"+c+";width:"+b+"'src='"+a+"'></iframe>")},DCMenu.addToFavorites=function(a,b,c){Y.one(a).replaceClass("off","on"),Y.one(a).setAttribute("title",SUGAR.language.get("app_strings","LBL_REMOVE_FROM_FAVORITES")),a.onclick=function(){DCMenu.removeFromFavorites(this,b,c),SUGAR.themes.updateFavoritesList(!0)},quickRequest("favorites","index.php?to_pdf=1&module=SugarFavorites&action=save&fav_id="+c+"&fav_module="+b),SUGAR.themes.updateFavoritesList(!0)},DCMenu.removeFromFavorites=function(a,b,c){Y.one(a).replaceClass("on","off"),Y.one(a).setAttribute("title",SUGAR.language.get("app_strings","LBL_ADD_TO_FAVORITES")),a.onclick=function(){DCMenu.addToFavorites(this,b,c)},quickRequest("favorites","index.php?to_pdf=1&module=SugarFavorites&action=delete&fav_id="+c+"&fav_module="+b)},DCMenu.tagFavorites=function(a,b,c,d){quickRequest("favorites","index.php?to_pdf=1&module=SugarFavorites&action=tag&fav_id="+c+"&fav_module="+b+"&tag="+d)},DCMenu.pluginList=function(){quickRequest("plugins","index.php?to_pdf=1&module=Home&action=pluginList",pluginResults)},pluginResults=function(a,b){var c=setBody(b.responseText,0,"globalLinks");c.set("y",90)},DCMenu.history=function(a){quickRequest("spot","index.php?append_wildcard=true&to_pdf=1&module="+this.module+"&action=modulelistmenu",spotResults)},DCMenu.startSearch=function(a){window.event&&(a=window.event),13==a.keyCode&&DCMenu.spot(document.getElementById("sugar_spot_search").value)},Y.spot=function(a){var a=$.trim(a);""!=a&&(DCMenu.closeQView(),ajaxStatus.showStatus(SUGAR.language.get("app_strings","LBL_LOADING")),quickRequest("spot","index.php?append_wildcard=true&to_pdf=1&module="+this.module+"&action=spot&record="+this.record+"&q="+encodeURIComponent(a),spotResults))},Y.spotFull=function(a){DCMenu.closeQView(),ajaxStatus.showStatus(SUGAR.language.get("app_strings","LBL_LOADING")),quickRequest("spot","index.php?append_wildcard=true&to_pdf=1&module="+this.module+"&action=spot&full=true&ajax=true&record="+this.record+"&q="+encodeURIComponent(a),fullResults)},DCMenu.spotZoom=function(a,b,c){quickRequest("spot","index.php?append_wildcard=true&to_pdf=1&module="+this.module+"&action=spot&record="+this.record+"&q="+encodeURIComponent(a)+"&zoom="+b+"&offset="+c,spotResults)},fullResults=function(a,b){var c=document.getElementById("sugar_full_search_results");c.style.display="block",c.innerHTML=b.responseText,ajaxStatus.hideStatus()},spotResults=function(a,b){document.getElementById("sugar_spot_search").className="searching";var c=document.getElementById("sugar_spot_search_results");c.style.display="block",c.innerHTML=b.responseText,ajaxStatus.hideStatus()},DCMenu.showQELoadingPanel=function(){DCMenu.qePanel||(DCMenu.qePanel=new YAHOO.widget.Panel("quickEditWindow",{width:"1050px",draggable:!0,close:!0,constraintoviewport:!0,fixedcenter:!1,script:!0,modal:!0}));var a=DCMenu.qePanel;a.setHeader(SUGAR.language.get("app_strings","LBL_EMAIL_PERFORMING_TASK")),a.setBody(SUGAR.language.get("app_strings","LBL_EMAIL_ONE_MOMENT")),a.render(document.body),a.show(),a.center()},DCMenu.miniDetailView=function(a,b){DCMenu.showQELoadingPanel(),YAHOO.util.Connect.asyncRequest("GET","index.php?to_pdf=1&module="+a+"&action=quick&record="+b,{success:DCMenu.miniDetailViewResults})},DCMenu.miniEditView=function(a,b,c,d){DCMenu.showQELoadingPanel(),YAHOO.util.Connect.asyncRequest("GET","index.php?to_pdf=1&module="+a+"&action=Quickedit&record="+b,{success:DCMenu.miniDetailViewResults}),"undefined"!=typeof c&&""!=c&&(DCMenu.qe_refresh='SUGAR.ajaxUI.loadContent("index.php?module='+a+"&action=index&ignore="+(new Date).getTime()+'");'),"undefined"!=typeof d&&""!=d&&(DCMenu.qe_refresh='SUGAR.mySugar.retrieveDashlet("'+d+'");')},DCMenu.miniDetailViewResults=function(a){var b=DCMenu.qePanel,c=Y.JSON.parse(a.responseText);"undefined"!=typeof c.scriptOnly&&"string"==typeof c.scriptOnly&&c.scriptOnly.length>0?SUGAR.util.evalScript(c.scriptOnly):(DCMenu.jsEvalled=!1,b.setHeader(c.title),b.setBody("<script type='text/javascript'>DCMenu.jsEvalled = true</script>"+c.html),DCMenu.jsEvalled||SUGAR.util.evalScript(c.html),DCMenu.centerQEPanel())},DCMenu.centerQEPanel=function(){var a=document.documentElement.scrollLeft||document.body.scrollLeft,b=document.documentElement.scrollTop||document.body.scrollTop,c=YAHOO.util.Dom.getClientWidth(),d=YAHOO.util.Dom.getClientHeight(),e=DCMenu.qePanel.element.offsetWidth,f=DCMenu.qePanel.element.offsetHeight,g=c/2-e/2+a,h=f+10>=d?10+b:d/2-f/2+b;DCMenu.qePanel.element.style.left=parseInt(g,10)+"px",DCMenu.qePanel.element.style.top=parseInt(h,10)+"px",DCMenu.qePanel.syncPosition(),DCMenu.qePanel.cfg.refireEvent("iframe")},DCMenu.hideQEPanel=function(){DCMenu.qePanel&&(DCMenu.qePanel.setBody(""),DCMenu.qePanel.hide())},DCMenu.save=function(id){return ajaxStatus.showStatus(SUGAR.language.get("app_strings","LBL_SAVING")),Y.io("index.php",{method:"POST",form:{id:id,upload:!0},on:{complete:function(id,data){try{var returnData=Y.JSON.parse(data.responseText);switch(returnData.status){case"dupe":location.href="index.php?"+returnData.get;break;case"success":ajaxStatus.flashStatus(SUGAR.language.get("app_strings","LBL_SAVED"),2e3)}}catch(a){ajaxStatus.flashStatus(SUGAR.language.get("app_strings","LBL_SAVED"),2e3)}"string"==typeof DCMenu.qe_refresh&&eval(DCMenu.qe_refresh)}}}),lastLoadedMenu=void 0,DCMenu.closeOverlay(),!1},DCMenu.submitForm=function(a,b,c){return ajaxStatus.showStatus(b),Y.io("index.php",{method:"POST",form:{id:a,upload:!0},on:{complete:function(a,b){}}}),lastLoadedMenu=void 0,!1},DCMenu.hostMeeting=function(){window.open(DCMenu.hostMeetingUrl,"hostmeeting")},DCMenu.loadView=function(a,b,c,d,e,f){void 0==f&&(f=null);var g=Y.io(b,{method:"POST",on:{success:function(a,b){try{jData=Y.JSON.parse(b.responseText),setBody(jData,requests[a].depth,requests[a].parentid,e,f);var c=Y.Node.get("head");for(i in jData.scripts){var d=document.createElement("script");d.src=jData.scripts[i],c.appendChild(d)}SUGAR.util.evalScript(jData.html),setTimeout("enableQS();",1e3)}catch(c){DCMenu.jsEvalled=!1;var g=setBody({html:"<script type='text/javascript'>DCMenu.jsEvalled = true</script>"+b.responseText},requests[a].depth,requests[a].parentid,requests[a].type,e,f),h=Y.one("#dcmenuSugarCube"),j=Y.one("#dcboxbody"),k=h?h.get("offsetLeft"):0,l=j.get("offsetWidth");if(setTimeout(function(){if(jQuery&&jQuery.fn){var a=$("#"+g.get("id")),b=$("#dcboxbody"),c=b.outerWidth(),d=b.outerHeight(),e=$(window).width(),f=$(window).height();a.css({left:.5*(e-c),top:.5*(f-d),width:c,height:d})}else g.set("width",j.get("offsetWidth")+"px"),g.set("height",j.get("offsetHeight")+"px"),g.set("centered",!0);j.setStyle("visibility","visible")},1e3),Y.one("#dcboxbody").setStyle("margin","0 5% 0 0"),isSafari&&j.setStyle("width",l+"px"),SUGAR.isIE){var m=Y.one("#dchead"),n=m.get("offsetWidth");Y.one("#dctitle").setStyle("width",n+"px")}isRTL&&g.set("x",k-l),DCMenu.jsEvalled||SUGAR.util.evalScript(b.responseText),setTimeout("enableQS();",1e3)}},failure:function(a,b){}}});requests[g.id]={type:a,url:b,parentid:d,depth:c,extraButton:f}};var loadView=Y.loadView;DCMenu.notificationsList=function(a){quickRequest("notifications","index.php?to_pdf=1&module=Notifications&action=quicklist",notificationsListDisplay)},notificationsListDisplay=function(id,data){var overlay=setBody(data.responseText,0,"dcmenuSugarCube","",SUGAR.language.get("app_strings","LBL_NOTIFICATIONS")),dcmenuSugarCube=Y.one("#dcmenuSugarCube"),dcboxbody=Y.one("#dcboxbody");Y.one("#dcboxbody").setStyle("visibility","visible");var dcmenuSugarCubeX=dcmenuSugarCube.get("offsetLeft"),dcmenuSugarCubeWidth=dcmenuSugarCube.get("offsetWidth"),dcboxbodyWidth=dcboxbody.get("offsetWidth"),js_notification=$("#js_notification").val();eval(js_notification),isRTL?overlay.set("x",dcmenuSugarCubeX):overlay.set("x",dcmenuSugarCubeX+dcmenuSugarCubeWidth-dcboxbodyWidth),$("#dcmenuSugarCube").addClass("focused")},DCMenu.viewMiniNotification=function(a){quickRequest("notifications","index.php?to_pdf=1&module=Notifications&action=quickView&record="+a,notificationDisplay)},notificationDisplay=function(a,b){var c=Y.JSON.parse(b.responseText);setBody(c.contents,0),decrementUnreadNotificationCount()},decrementUnreadNotificationCount=function(){var a=parseInt(document.getElementById("notifCount").innerHTML);document.getElementById("notifCount").innerHTML=a-1},updateNotificationNumber=function(a,b){var c=Y.JSON.parse(b.responseText),d=parseInt(document.getElementById("notifCount").innerHTML);document.getElementById("notifCount").innerHTML=parseInt(c.unreadCount)+d},DCMenu.checkForNewNotifications=function(){quickRequest("notifications","index.php?to_pdf=1&module=Notifications&action=checkNewNotifications",updateNotificationNumber)},DCMenu.showQuickViewIcon=function(a){var b=document.getElementById("gs_div_"+a);b.style.visibility="visible"},DCMenu.hideQuickViewIcon=function(a){var b=document.getElementById("gs_div_"+a);b.style.visibility="hidden"},DCMenu.closeQView=function(){if(overlays.sqv&&Y.one("#SpotResults")){var a=overlays.sqv;a.visible=!1,a.get("boundingBox").setStyle("visibility","hidden")}},DCMenu.showQuickView2=function(a,b){var c=document.getElementById("sugar_spot_search").value;quickRequest("showGAView","index.php?module="+a+"&action=gs&record="+b+"&q="+encodeURIComponent(c),function(a,b){var c=Y.one("#dcgscontent");c.set("innerHTML",b.responseText);var d=new Y.Anim({node:c,to:{height:500}});d.run()});var d=new Y.Anim({node:"#dccontent",to:{height:500}});d.set("duration",.5),d.set("easing",Y.Easing.easeOut),d.run();var e="sqv";if("undefined"!=typeof overlays[e]){var f=Y.one("#dcgscontent");return f.set("innerHTML",'<div style="height:400px;width:300px;"><img src="themes/default/images/img_loading.gif"/></div>'),void(overlays[e].visible||overlays[e].show())}overlays[e]=new Y.Overlay({bodyContent:"",zIndex:100,height:500,width:320,shim:!1,visibility:!0}),content='<div id="dcboxbodyqv" class="sugar_spot_search" style="position: fixed;"><div class="dashletPanel dc"><div class="hd"><div><a id="dcmenu_close_link" href="javascript:DCMenu.closeQView()"><i class="icon-remove icon-sm"></i></a></div></div><div class="bd"><div class="bd-center"><div class="dccontent" id="dcgscontent"><br><div style="height:400px;width:300px;"><img src="themes/default/images/img_loading.gif"/><br></div></div></div></div><div class="ft"><div class="bl"></div><div class="ft-center"></div><div class="br"></div></div></div></div></div></div></div></div></div>',overlays[e].set("bodyContent",content),overlays[e].set("align",{node:"#dcboxbody",points:[Y.WidgetPositionExt.TR,Y.WidgetPositionExt.TR]}),overlays[e].visible=!0,overlays[e].show=function(){this.visible=!0,this.get("boundingBox").setStyle("visibility","visible");var a=10,b=this.get("x")-this.get("width")-a,c=this.get("y"),d=new Y.Anim({node:this.get("boundingBox"),to:{xy:[b,c],height:500}});d.set("duration",.5),d.set("easing",Y.Easing.easeOut),d.run()},overlays[e].after("render",function(a){this.show()}),overlays[e].render()},DCMenu.showQuickView=function(a,b){var c="sqv",d=Y.one("#SpotResults");"undefined"==typeof overlays[c]&&(overlays[c]=new Y.Overlay({bodyContent:"",zIndex:100,height:d._node.clientHeight,width:320,shim:!1,visibility:!0}));var e=document.getElementById("sugar_spot_search").value;url="index.php?module="+a+"&action=gs&record="+b+"&q="+encodeURIComponent(e),quickRequest("showGAView","index.php?module="+a+"&action=gs&record="+b+"&q="+encodeURIComponent(e),function(a,b){var d='<div id="dcboxbodyqv" class="sugar_spot_search" style="position: fixed;">';d+='<div class="dashletPanel dc"><div class="hd">',"RTL"==SUGAR.themes.theme_name?(d+='<div><div style="float:right"><a id="dcmenu_close_link" href="javascript:DCMenu.closeQView()">',d+='<i class="icon-remove icon-sm"></i>',d+='</a></div></div></div><div class="tr"></div><div class="bd">'):(d+='<div><a id="dcmenu_close_link" href="javascript:DCMenu.closeQView()">',d+='<i class="icon-remove icon-sm"></i>',d+='</a></div></div><div class="tr"></div><div class="bd">'),d+='<div><div class="dccontent" id="dcgscontent">'+b.responseText,d+="</div></div></div>",d+="</div></div></div></div></div></div></div></div>",overlays[c].set("bodyContent",d),overlays[c].set("align",{node:"#SpotResults",points:[Y.WidgetPositionAlign.TR,Y.WidgetPositionAlign.TR]}),overlays[c].visible=!0,overlays[c].show=function(){this.visible=!0,this.get("boundingBox").setStyle("visibility","visible");var a=$("#sugar_spot_search_results").offset().left,b=$("#sugar_spot_search_results").width(),c=35,d="RTL"==SUGAR.themes.theme_name?a+b+c+5:a-this.get("width")-c,e=42,f=new Y.Anim({node:this.get("boundingBox"),to:{xy:[d,e]}});f.set("duration",.25),f.set("easing",Y.Easing.easeOut),f.run()},overlays[c].after("render",function(a){this.show()}),overlays[c].render()})}});